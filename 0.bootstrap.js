(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../pkg sync recursive":
/*!*******************!*\
  !*** ../pkg sync ***!
  \*******************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"../pkg sync recursive\";\n\n//# sourceURL=webpack:///../pkg_sync?");

/***/ }),

/***/ "../pkg/tetris_wasm.js":
/*!*****************************!*\
  !*** ../pkg/tetris_wasm.js ***!
  \*****************************/
/*! exports provided: TileType, Board, __wbindgen_object_drop_ref, __wbg_self_1b7a39e3a92c949c, __wbg_require_604837428532a733, __wbg_crypto_968f1772287e2df0, __wbindgen_is_undefined, __wbg_getRandomValues_a3d34b4fee3c2869, __wbg_getRandomValues_f5e14ab7ac8e995d, __wbg_randomFillSync_d5bd2d655fdf256a, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TileType\", function() { return TileType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Board\", function() { return Board; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_object_drop_ref\", function() { return __wbindgen_object_drop_ref; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_self_1b7a39e3a92c949c\", function() { return __wbg_self_1b7a39e3a92c949c; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_require_604837428532a733\", function() { return __wbg_require_604837428532a733; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_crypto_968f1772287e2df0\", function() { return __wbg_crypto_968f1772287e2df0; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_is_undefined\", function() { return __wbindgen_is_undefined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_getRandomValues_a3d34b4fee3c2869\", function() { return __wbg_getRandomValues_a3d34b4fee3c2869; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_getRandomValues_f5e14ab7ac8e995d\", function() { return __wbg_getRandomValues_f5e14ab7ac8e995d; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_randomFillSync_d5bd2d655fdf256a\", function() { return __wbg_randomFillSync_d5bd2d655fdf256a; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return __wbindgen_throw; });\n/* harmony import */ var _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tetris_wasm_bg.wasm */ \"../pkg/tetris_wasm_bg.wasm\");\n\n\nconst heap = new Array(32);\n\nheap.fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? __webpack_require__(/*! util */ \"./node_modules/util/util.js\").TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint8Memory0 = new Uint8Array(_tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction handleError(e) {\n    _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_exn_store\"](addHeapObject(e));\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n*/\nconst TileType = Object.freeze({ Empty:1,Turquoise:2,Blue:3,Orange:4,Yellow:5,Green:6,Purple:7,Red:8, });\n/**\n*/\nclass Board {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Board.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_board_free\"](ptr);\n    }\n    /**\n    * @returns {Board}\n    */\n    static new() {\n        var ret = _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_new\"]();\n        return Board.__wrap(ret);\n    }\n    /**\n    */\n    reset() {\n        _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_reset\"](this.ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    width() {\n        var ret = _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_width\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    height() {\n        var ret = _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_height\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    score() {\n        var ret = _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_score\"](this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    tiles_ptr() {\n        var ret = _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_tiles_ptr\"](this.ptr);\n        return ret;\n    }\n    /**\n    */\n    move_left() {\n        _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_move_left\"](this.ptr);\n    }\n    /**\n    */\n    move_rigth() {\n        _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_move_rigth\"](this.ptr);\n    }\n    /**\n    */\n    rotate() {\n        _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_rotate\"](this.ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    tiles_len() {\n        var ret = _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_tiles_len\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    */\n    update_rotate_stride() {\n        _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_update_rotate_stride\"](this.ptr);\n    }\n    /**\n    */\n    update_fall() {\n        _tetris_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"board_update_fall\"](this.ptr);\n    }\n}\n\nconst __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\nconst __wbg_self_1b7a39e3a92c949c = function() {\n    try {\n        var ret = self.self;\n        return addHeapObject(ret);\n    } catch (e) {\n        handleError(e)\n    }\n};\n\nconst __wbg_require_604837428532a733 = function(arg0, arg1) {\n    var ret = __webpack_require__(\"../pkg sync recursive\")(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nconst __wbg_crypto_968f1772287e2df0 = function(arg0) {\n    var ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n};\n\nconst __wbindgen_is_undefined = function(arg0) {\n    var ret = getObject(arg0) === undefined;\n    return ret;\n};\n\nconst __wbg_getRandomValues_a3d34b4fee3c2869 = function(arg0) {\n    var ret = getObject(arg0).getRandomValues;\n    return addHeapObject(ret);\n};\n\nconst __wbg_getRandomValues_f5e14ab7ac8e995d = function(arg0, arg1, arg2) {\n    getObject(arg0).getRandomValues(getArrayU8FromWasm0(arg1, arg2));\n};\n\nconst __wbg_randomFillSync_d5bd2d655fdf256a = function(arg0, arg1, arg2) {\n    getObject(arg0).randomFillSync(getArrayU8FromWasm0(arg1, arg2));\n};\n\nconst __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\n\n\n//# sourceURL=webpack:///../pkg/tetris_wasm.js?");

/***/ }),

/***/ "../pkg/tetris_wasm_bg.wasm":
/*!**********************************!*\
  !*** ../pkg/tetris_wasm_bg.wasm ***!
  \**********************************/
/*! exports provided: memory, __wbg_board_free, board_new, board_reset, board_width, board_height, board_score, board_tiles_ptr, board_move_left, board_move_rigth, board_rotate, board_tiles_len, board_update_rotate_stride, board_update_fall, __wbindgen_exn_store */
/***/ (function(module, exports, __webpack_require__) {

eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.i];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name != \"__webpack_init__\") exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./tetris_wasm.js */ \"../pkg/tetris_wasm.js\");\n\n\n// exec wasm module\nwasmExports[\"__webpack_init__\"]()\n\n//# sourceURL=webpack:///../pkg/tetris_wasm_bg.wasm?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core */ \"./src/core.js\");\n\n\n_src_core__WEBPACK_IMPORTED_MODULE_0__[\"Core\"].initialize();\n\n//# sourceURL=webpack:///./index.js?");

/***/ }),

/***/ "./src/core.js":
/*!*********************!*\
  !*** ./src/core.js ***!
  \*********************/
/*! exports provided: TILE_SIZE, GRID_COLOR, TILE_COLOR, FALL_TO_MOVE_UPDATE_RATIO, BOARD, WIDTH, HEIGHT, CANVAS, CTX, SCORE_DISPLAY, Core */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TILE_SIZE\", function() { return TILE_SIZE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GRID_COLOR\", function() { return GRID_COLOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TILE_COLOR\", function() { return TILE_COLOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FALL_TO_MOVE_UPDATE_RATIO\", function() { return FALL_TO_MOVE_UPDATE_RATIO; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BOARD\", function() { return BOARD; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WIDTH\", function() { return WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HEIGHT\", function() { return HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CANVAS\", function() { return CANVAS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CTX\", function() { return CTX; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SCORE_DISPLAY\", function() { return SCORE_DISPLAY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Core\", function() { return Core; });\n/* harmony import */ var tetris_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tetris-wasm */ \"../pkg/tetris_wasm.js\");\n/* harmony import */ var tetris_wasm_tetris_wasm_bg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tetris-wasm/tetris_wasm_bg */ \"../pkg/tetris_wasm_bg.wasm\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./storage */ \"./src/storage.js\");\n/* harmony import */ var _menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./menu */ \"./src/menu.js\");\n\n\n\n\n\n\nconst TILE_SIZE  = 20; // px\nconst GRID_COLOR = \"#CCCCCC\";\nconst TILE_COLOR = \"#000000\";\n\n// Should be equal or less to 1\nconst FALL_TO_MOVE_UPDATE_RATIO = 0.5;\n\n\nconst BOARD  = tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"Board\"].new();\nconst WIDTH  = BOARD.width();\nconst HEIGHT = BOARD.height();\n\nconst CANVAS = document.getElementById(\"tetris-canvas\");\nconst CTX = CANVAS.getContext('2d');\nconst SCORE_DISPLAY = document.getElementById(\"score_display\");\n\nCANVAS.width  = (TILE_SIZE + 1) * WIDTH + 1;\nCANVAS.height = (TILE_SIZE + 1) * HEIGHT + 1;\n\nconst SPED_UP_UPDATE_RATE = 50;\nconst FALL_DECAY = 0.2;\n\nconst Core = {\n    prevFrameTime: new Date().getTime(),\n    updateTimeCounter: 0,\n    activeUpdateRate: 300,\n    currentUpdateRate: 300,\n    paused: false,\n    prevSetScore: 0,\n\n    initialize: () => {\n        const toggleMenu = () => {\n            Core.paused = _menu__WEBPACK_IMPORTED_MODULE_3__[\"MainMenu\"].toggleSelf(CANVAS);\n        };\n          \n        const myStorage = Object(_storage__WEBPACK_IMPORTED_MODULE_2__[\"getLocalStorage\"])();\n        \n        // source: https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key\n        document.addEventListener('keydown', (event) => {\n            if (event.defaultPrevented) {\n                return; // Do nothing if the event was already processed\n            }\n        \n            switch (event.key) {\n                    case myStorage.getItem(_storage__WEBPACK_IMPORTED_MODULE_2__[\"rotateKey\"]):\n                    BOARD.rotate();\n                break;\n                    case myStorage.getItem(_storage__WEBPACK_IMPORTED_MODULE_2__[\"leftKey\"]):\n                    BOARD.move_left();\n                break;\n                case myStorage.getItem(_storage__WEBPACK_IMPORTED_MODULE_2__[\"downKey\"]):\n                    Core.activeUpdateRate = SPED_UP_UPDATE_RATE;\n                    break;\n                case myStorage.getItem(_storage__WEBPACK_IMPORTED_MODULE_2__[\"rightKey\"]):\n                    BOARD.move_rigth();\n                    break;\n                case 'Escape':\n                    toggleMenu();\n                    break;\n                \n                default:\n                    return; // Quit when this doesn't handle the key event.\n            }\n        \n            // Cancel the default action to avoid it being handled twice\n            event.preventDefault();\n        }, true);\n        \n        document.addEventListener('keyup', (event) => {\n            if (event.defaultPrevented) {\n                return; // Do nothing if the event was already processed\n            }\n            switch (event.key) {\n                case 's':\n                Core.activeUpdateRate = Core.currentUpdateRate;\n                break;\n                default:\n                return; // Quit when this doesn't handle the key event.\n            }\n            // Cancel the default action to avoid it being handled twice\n            event.preventDefault();\n        }, true);\n        \n        _menu__WEBPACK_IMPORTED_MODULE_3__[\"MainMenu\"].addResumeClickCallback(() => {\n            toggleMenu();\n        });\n        \n        _menu__WEBPACK_IMPORTED_MODULE_3__[\"MainMenu\"].addResetClickCallback(() => {\n            BOARD.reset();\n            toggleMenu();\n        });\n        \n        _menu__WEBPACK_IMPORTED_MODULE_3__[\"MainMenu\"].addSettingsClickCallback(() => {\n            _menu__WEBPACK_IMPORTED_MODULE_3__[\"SettingsMenu\"].toggleSelf(CANVAS);\n        });\n        \n        \n        Core.drawGrid();\n        Core.drawTiles();\n        Core.gameLoop(); \n    },\n\n    drawGrid: () => {\n        CTX.beginPath();\n        CTX.strokeStyle = GRID_COLOR;\n    \n        // Vertical lines.\n        for (let i = 0; i <= WIDTH; i++) {\n            const xPos = i * (TILE_SIZE + 1) + 1;\n            CTX.moveTo(xPos, 0);\n            CTX.lineTo(xPos, CANVAS.height);\n        }\n    \n        // Horizontal lines.\n        for (let i = 0; i <= HEIGHT; i++) {\n            const yPos = i * (TILE_SIZE + 1) + 1; \n            CTX.moveTo(0,            yPos);\n            CTX.lineTo(CANVAS.width, yPos);\n        }\n    \n        CTX.stroke();\n    },\n\n    mapTileToColor: (u8Tile) => {\n        switch(u8Tile) {\n          case tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"TileType\"].Empty:\n            return \"#FFFFFF\";\n          \n          case tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"TileType\"].Turquoise: \n            return \"#40e0d0\";\n      \n          case tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"TileType\"].Blue: \n            return \"#405be0\";\n      \n          case tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"TileType\"].Orange: \n            return \"#f69114\";\n      \n          case tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"TileType\"].Yellow: \n            return \"#e8ea19\";\n      \n          case tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"TileType\"].Green: \n            return \"#01db10\";\n      \n          case tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"TileType\"].Purple: \n            return \"#ad01db\";\n      \n          case tetris_wasm__WEBPACK_IMPORTED_MODULE_0__[\"TileType\"].Red: \n            return \"#920000\";\n      \n          default: \n            console.error(\"Invalid tile type: \", u8Tile);\n            return \"#000000\"\n        }\n    },\n\n    getIndex: (row, column) => {\n        return row * WIDTH + column;\n    },\n      \n    drawTiles: () => {\n        const tilesPtr = BOARD.tiles_ptr();\n        \n        const tiles = new Uint8Array(tetris_wasm_tetris_wasm_bg__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, tilesPtr, BOARD.tiles_len());\n        \n        CTX.beginPath();\n        \n        CTX.fillStyle = TILE_COLOR;\n        \n        for (let row = 0; row < HEIGHT; row++) {\n            for (let col = 0; col < WIDTH; col++) {\n            const index = Core.getIndex(row, col);\n            CTX.fillStyle = Core.mapTileToColor(tiles[index]);\n        \n            CTX.fillRect(\n                col * (TILE_SIZE + 1) + 1,\n                row * (TILE_SIZE + 1) + 1,\n                TILE_SIZE,\n                TILE_SIZE);\n            }\n        }\n        \n        CTX.stroke();\n    },\n\n    gameLoop: (_) => {\n        if (Core.paused) {\n            Core.prevFrameTime = new Date().getTime();\n            requestAnimationFrame(Core.gameLoop);\n            return;\n        }\n      \n        let thisFrameTime = new Date().getTime();\n        Core.updateTimeCounter += thisFrameTime - Core.prevFrameTime;\n      \n        if (Core.updateTimeCounter > Core.activeUpdateRate * FALL_TO_MOVE_UPDATE_RATIO) {\n            BOARD.update_rotate_stride();\n        }\n      \n        if (Core.updateTimeCounter > Core.activeUpdateRate) { \n            //Core.currentUpdateRate = Math.max(Core.currentUpdateRate - FALL_DECAY, 150);\n            BOARD.update_fall();\n            Core.updateTimeCounter = 0;\n        }\n\n        if (Core.activeUpdateRate != SPED_UP_UPDATE_RATE) {\n            Core.activeUpdateRate = Core.currentUpdateRate;\n        }\n      \n        // TODO @refactor: should only happend when score changes\n        if (Core.prevSetScore != BOARD.score()) {\n            Core.prevSetScore = BOARD.score();\n            SCORE_DISPLAY.innerText = \"Score: \" + BOARD.score();\n        }\n        \n      \n        CTX.clearRect(0, 0, CANVAS.width, CANVAS.height); \n        Core.drawGrid();\n        Core.drawTiles();\n      \n        requestAnimationFrame(Core.gameLoop);\n      \n        Core.prevFrameTime = thisFrameTime;\n    },\n}\n\n//# sourceURL=webpack:///./src/core.js?");

/***/ }),

/***/ "./src/menu.js":
/*!*********************!*\
  !*** ./src/menu.js ***!
  \*********************/
/*! exports provided: MainMenu, SettingsMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MainMenu\", function() { return MainMenu; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SettingsMenu\", function() { return SettingsMenu; });\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./storage */ \"./src/storage.js\");\n\n\n// ---------------------- MAIN MENU ---------------------------------------------\n// TODO: this is the pause menu. main menu should be something else, but similiar\nconst MainMenu = {\n    rootElement: document.getElementById('mainMenu'),\n\n    toggleSelf: (canvas) => {\n        SettingsMenu.rootElement.style.display = 'none';\n        if (MainMenu.rootElement.style.display !== 'none') {\n            MainMenu.rootElement.style.display = 'none';\n            canvas.style.display = 'block'\n            return false;\n        } else {\n            MainMenu.rootElement.style.width    = canvas.width + 'px';\n            MainMenu.rootElement.style.height   = canvas.height + 'px';\n            MainMenu.rootElement.style.display  = 'block';\n            canvas.style.display    = 'none';\n            return true;\n        }\n    },\n\n    // exported as we need external data\n    addResumeClickCallback: (callback) => {\n        const resumeButton = document.getElementById('resume');\n        resumeButton.addEventListener('click', callback);\n    },\n\n    addResetClickCallback: (callback) => {\n        const resetButton = document.getElementById('reset');\n        resetButton.addEventListener('click', callback);\n    },\n\n    addSettingsClickCallback: (callback) => {\n        const settingsButton = document.getElementById('settings');\n        settingsButton.addEventListener('click', callback);\n    }\n}\n\n\n// -------------------- SETTINGS --------------------------------------------------\n// TODO: back button, player count setting, reset keybindings\nconst SettingsMenu = {\n    rootElement: document.getElementById('settingsMenu'),\n\n    rotKeyElement: document.getElementById('rot_inp'),\n    downKeyElement: document.getElementById('down_inp'),\n    leftKeyElement: document.getElementById('left_stride_inp'),\n    rightKeyElement: document.getElementById('right_stride_inp'),\n\n    allKeys: [\n        'q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', \n        'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l',\n        'z', 'x', 'c', 'v', 'b', 'n', 'm', \n        'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown',\n        '1', '2', '3', '4', '6', '7', '8', '9'\n    ],\n\n    /* \n    *   Should only be called from this file\n    */\n    initialize: () => {\n        const onSelectChange = (keyType, event) => {\n            const myStorage = Object(_storage__WEBPACK_IMPORTED_MODULE_0__[\"getLocalStorage\"])();\n            myStorage.setItem(keyType, event.target.value);\n        };    \n\n        SettingsMenu.rotKeyElement.addEventListener('change', event => onSelectChange(_storage__WEBPACK_IMPORTED_MODULE_0__[\"rotateKey\"], event));\n        SettingsMenu.downKeyElement.addEventListener('change', event => onSelectChange(_storage__WEBPACK_IMPORTED_MODULE_0__[\"downKey\"], event));\n        SettingsMenu.leftKeyElement.addEventListener('change', event => onSelectChange(_storage__WEBPACK_IMPORTED_MODULE_0__[\"leftKey\"], event));\n        SettingsMenu.rightKeyElement.addEventListener('change', event => onSelectChange(_storage__WEBPACK_IMPORTED_MODULE_0__[\"rightKey\"], event));\n\n        SettingsMenu.allKeys.forEach(k => {\n            for (let i = 0; i < 4; i++) {\n                const option = document.createElement('OPTION');\n                option.value = k;\n                option.text = k;\n\n                switch(i) {\n                    case 0:\n                        SettingsMenu.rotKeyElement.add(option);\n                        break;\n                    case 1:\n                        SettingsMenu.downKeyElement.add(option);\n                        break;\n                    case 2:\n                        SettingsMenu.leftKeyElement.add(option);\n                        break;\n                    case 3:\n                        SettingsMenu.rightKeyElement.add(option);\n                        break;\n                }\n            }\n        });\n    },\n\n    toggleSelf: (canvas) => {\n        if (SettingsMenu.rootElement.style.display !== 'none') {\n            SettingsMenu.rootElement.style.display = 'none';\n            MainMenu.rootElement.style.display     = 'block';\n        } else {\n            MainMenu.rootElement.style.display      = 'none';\n            SettingsMenu.rootElement.style.width    = canvas.width + 'px';\n            SettingsMenu.rootElement.style.height   = canvas.height + 'px';\n            SettingsMenu.rootElement.style.display  = 'block';\n            SettingsMenu.setFormValues();\n        }\n    },\n\n    setFormValues: () => {\n        const myStorage = Object(_storage__WEBPACK_IMPORTED_MODULE_0__[\"getLocalStorage\"])();\n    \n        SettingsMenu.rotKeyElement.value = myStorage.getItem(_storage__WEBPACK_IMPORTED_MODULE_0__[\"rotateKey\"]);\n        SettingsMenu.downKeyElement.value = myStorage.getItem(_storage__WEBPACK_IMPORTED_MODULE_0__[\"downKey\"]);\n        SettingsMenu.leftKeyElement.value = myStorage.getItem(_storage__WEBPACK_IMPORTED_MODULE_0__[\"leftKey\"]);\n        SettingsMenu.rightKeyElement.value = myStorage.getItem(_storage__WEBPACK_IMPORTED_MODULE_0__[\"rightKey\"]);\n    },\n} \n\nSettingsMenu.initialize();\n\n//# sourceURL=webpack:///./src/menu.js?");

/***/ }),

/***/ "./src/storage.js":
/*!************************!*\
  !*** ./src/storage.js ***!
  \************************/
/*! exports provided: rotateKey, leftKey, downKey, rightKey, getLocalStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rotateKey\", function() { return rotateKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"leftKey\", function() { return leftKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"downKey\", function() { return downKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rightKey\", function() { return rightKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLocalStorage\", function() { return getLocalStorage; });\nlet myStorage;\n\nconst rotateKey = 'rotateKey';\nconst leftKey = 'leftKey';\nconst downKey = 'downKey';\nconst rightKey = 'rightKey';\n\nif (storageAvailable('localStorage')) {\n    myStorage = window.localStorage;\n\n    const setDefault = (keyName, keyValue) => {\n        if (!myStorage.getItem(keyName)) {\n            myStorage.setItem(keyName, keyValue);\n        }\n    } \n\n    setDefault(rotateKey, 'w');\n    setDefault(leftKey, 'a');\n    setDefault(downKey, 's');\n    setDefault(rightKey, 'd');\n} else {\n    myStorage = {\n        getItem: (keyName) => {\n            switch(keyName) {\n                case rotateKey:\n                    return 'w';\n                case leftKey:\n                    return 'a';\n                case downKey:\n                    return 's';\n                case rightKey:\n                    return 'd';\n            } \n        },\n        setItem: (keyName, keyValue) => {},\n    }\n}\n\nfunction getLocalStorage() {\n    return myStorage;\n}\n\n\n// source: https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\nfunction storageAvailable(type) {\n    var storage;\n    try {\n        storage = window[type];\n        var x = '__storage_test__';\n        storage.setItem(x, x);\n        storage.removeItem(x);\n        return true;\n    }\n    catch(e) {\n        return e instanceof DOMException && (\n            // everything except Firefox\n            e.code === 22 ||\n            // Firefox\n            e.code === 1014 ||\n            // test name field too, because code might not be present\n            // everything except Firefox\n            e.name === 'QuotaExceededError' ||\n            // Firefox\n            e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n            // acknowledge QuotaExceededError only if there's something already stored\n            (storage && storage.length !== 0);\n    }\n}\n\n//# sourceURL=webpack:///./src/storage.js?");

/***/ })

}]);